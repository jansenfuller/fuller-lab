services:
  server:
    image: docker.io/actualbudget/actual-server:latest
    ports:
      # This line makes Actual available at port 5006 of the device you run the server on,
      # i.e. http://localhost:5006. You can change the first number to change the port, if you want.
      - '2005:5006'
    volumes:
      # Change './actual-data' below to the path to the folder you want Actual to store its data in on your server.
      # '/data' is the path Actual will look for its files in by default, so leave that as-is.
      - ~/budget:/data
        #environment:
      #ACTUAL_OPENID_DISCOVERY_URL: https://login.fullerfamily.cc/application/o/actual-budget/
      #ACTUAL_OPENID_CLIENT_ID: ${CLIENT_ID}
      #ACTUAL_OPENID_CLIENT_SECRET: ${CLIENT_SECRET}
      #ACTUAL_OPENID_SERVER_HOSTNAME: https://actual.fullerfamily.cc
    healthcheck:
      # Enable health check for the instance
      test: ['CMD-SHELL', 'node src/scripts/health-check.js']
      interval: 60s
      timeout: 10s
      retries: 3
      start_period: 20s
    restart: unless-stopped

